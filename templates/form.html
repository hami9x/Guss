{# display validation errors for a specified field #}
{% macro v_e(model, field) %}
    <div class="form-error-message">
    {% set errors = model.get_errors() %}
    {% if field in errors %}
        {% for msg in errors[field] %}
                {{ msg }};
        {% endfor %}
    {% endif %}
    </div>
{% endmacro %}

{% macro field_label(model, field) %}
    <label class="form-field-label" for="{{ field }}">{{ model.get_verbose_name(field) }}</label>
{% endmacro %}

{% macro input_field(model, field, type="text") %}
    {{ field_label(model, field) }}:
    <input type="{{ type }}" name="{{ field }}" class="form-input-field"
    value= "{% if (type!="password") and (getattr(model, field) != None) -%}
                    {{ getattr(model, field) }}
            {%- else %}{% endif %}"
        {% if caller is defined %} {{ caller() }} {% endif %}
    />
    {%- if not model.is_required(field) %} {{ _("(Optional)") }} {% endif -%}
    <br/>
    {{ v_e(model, field) }}
{% endmacro %}
